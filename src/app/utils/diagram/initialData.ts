import { InitialDataItem } from '@/types/diagram';

class InitialData {
  public static init(): Array<InitialDataItem> {
    return [
      {
        metric: {
          __name__: 'cpu_usage_user',
          cpu: 'cpu-total',
          host: 'agent-test-1',
        },
        values: [
          [1596128655, '0.325488232324025'],
          [1596128665, '0.32555095164044'],
          [1596128675, '0.25037562613318'],
          [1596128685, '0.300651704889'],
          [1596128695, '0.2756266798595'],
          [1596128705, '0.125150200286155'],
          [1596128715, '0.12515020030486002'],
          [1596128725, '0.17532577714181502'],
          [1596128735, '0.15026319578573'],
          [1596128745, '0.25047611524512'],
          [1596128755, '0.4007766034975'],
          [1596128765, '0.4510150380845'],
          [1596128775, '0.425977481762'],
          [1596128785, '0.375827030452'],
          [1596128795, '0.300777080739805'],
          [1596128805, '0.275475838990305'],
          [1596128815, '0.27553862122999995'],
          [1596128825, '0.350764185004755'],
          [1596128835, '0.325651302584055'],
          [1596128845, '0.2255136840193'],
          [1596128855, '0.22556390979234497'],
          [1596128865, '0.300551077209105'],
          [1596128875, '0.37573904713376'],
          [1596128885, '0.4507138717675'],
          [1596128895, '0.42542542542967'],
          [1596128905, '0.42583937322867'],
          [1596128915, '0.40081434820423'],
          [1596128925, '0.30056372159902'],
          [1596128935, '0.30056372159902'],
          [1596128945, '0.30056372159902'],
          [1596128955, '0.30056372159902'],
        ],
      },
      {
        metric: {
          __name__: 'cpu_usage_iowait',
          cpu: 'cpu-total',
          host: 'agent-test-1',
        },
        values: [
          [1596128655, '0'],
          [1596128665, '0'],
          [1596128675, '0'],
          [1596128685, '0.025075225680575'],
          [1596128695, '0.025075225680575'],
          [1596128705, '0'],
          [1596128715, '0'],
          [1596128725, '0'],
          [1596128735, '0'],
          [1596128745, '0.025062656636125'],
          [1596128755, '0.025062656636125'],
          [1596128765, '0'],
          [1596128775, '0.02503755633654'],
          [1596128785, '0.02503755633654'],
          [1596128795, '0'],
          [1596128805, '0.02503755633654'],
          [1596128815, '0.02503755633654'],
          [1596128825, '0'],
          [1596128835, '0'],
          [1596128845, '0'],
          [1596128855, '0.025062656643085'],
          [1596128865, '0.025062656643085'],
          [1596128875, '0'],
          [1596128885, '0'],
          [1596128895, '0.025025025022735'],
          [1596128905, '0.025025025022735'],
          [1596128915, '0'],
          [1596128925, '0.025062656638405'],
          [1596128935, '0.025062656638405'],
          [1596128945, '0.025062656638405'],
          [1596128955, '0.025062656638405'],
        ],
      },
      {
        metric: {
          __name__: 'cpu_usage_system',
          cpu: 'cpu-total',
          host: 'agent-test-1',
        },
        values: [
          [1596128655, '0.37556334501099997'],
          [1596128665, '0.22536309472726002'],
          [1596128675, '0.150200300490595'],
          [1596128685, '0.250551454174335'],
          [1596128695, '0.27557647920399997'],
          [1596128705, '0.15017522531588'],
          [1596128715, '0.07510015027288'],
          [1596128725, '0.075125275730705'],
          [1596128735, '0.17515026320570498'],
          [1596128745, '0.425764260543'],
          [1596128755, '0.400877004686765'],
          [1596128765, '0.250563910071265'],
          [1596128775, '0.325676579058'],
          [1596128785, '0.35075180476650003'],
          [1596128795, '0.2506517548731'],
          [1596128805, '0.2504257387906'],
          [1596128815, '0.30060127785949997'],
          [1596128825, '0.225526240444415'],
          [1596128835, '0.20040080159859497'],
          [1596128845, '0.20043847092838'],
          [1596128855, '0.1503759398494'],
          [1596128865, '0.22541330792504'],
          [1596128875, '0.35072659112684'],
          [1596128885, '0.4007014533265'],
          [1596128895, '0.3003003003'],
          [1596128905, '0.22541338332'],
          [1596128915, '0.25043840835472997'],
          [1596128925, '0.225375751688355'],
          [1596128935, '0.225375751688355'],
          [1596128945, '0.225375751688355'],
          [1596128955, '0.225375751688355'],
        ],
      },
    ];
  }

  public static generate(min: number, max: number, generateTo: number): Array<InitialDataItem> {
    const result: Array<InitialDataItem> = [];
    let currentDate: number = 1596128655;
    const endDate: number = 1596128955;
    const dateStep: number = Math.floor(this.randomNumber(10, 100));
    const numberOfItemsInMetric: number = 3;

    for (let i = 0; i < numberOfItemsInMetric; i++) {
      result.push({
        metric: {
          __name__: `cpu_usage_rand_${i}`,
          cpu: `cpu-total_rand_${i}`,
          host: `agent-test-_rand_${i}`,
        },
        values: [],
      });
    }

    while (currentDate <= endDate) {
      let maxValue: number = max;

      for (let i = 0; i < numberOfItemsInMetric; i++) {
        const randomValue: number = this.randomNumber(min, generateTo);

        if (maxValue - randomValue > 0) {
          result[i].values.push([currentDate, randomValue]);
          maxValue -= randomValue;
        } else {
          result[i].values.push([currentDate, 0]);
        }
      }

      currentDate += dateStep;
    }

    return result;
  }

  protected static randomNumber(min: number, max: number): number {
    return Math.random() * (max - min + 1) + min;
  }
}

export default InitialData;
